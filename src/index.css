@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap");

@import "tailwindcss";

/* ═══════════════════════════════════════════════════════
   ACCESSIBILITY — Screen-reader only utility
   ═══════════════════════════════════════════════════════ */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* ═══════════════════════════════════════════════════════
   FULL-HEIGHT LAYOUT — Chain from html → body → #root → App
   ═══════════════════════════════════════════════════════ */
html,
body {
  height: 100%;
  height: 100dvh;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

#root {
  height: 100%;
  height: 100dvh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Prevent font-swap layout shifts */
body {
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ═══════════════════════════════════════════════════════
   FOCUS VISIBLE — Accessible keyboard navigation
   ═══════════════════════════════════════════════════════ */
:focus-visible {
  outline: 2px solid var(--logo-accent-from, #10b981);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Remove focus ring for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* ═══════════════════════════════════════════════════════
   ECLIPSE EMERALD PRO — Premium Dark Theme
   Deep charcoal, emerald accents, calm & refined
   ═══════════════════════════════════════════════════════ */
[data-theme="dark"] {
  --bg-root: #13141c;
  --bg-navbar: #171821;
  --bg-navbar-border: rgba(255, 255, 255, 0.05);
  --bg-panel-header: #1a1b26;
  --bg-editor: #16171f;
  --bg-console: #13141c;
  --bg-surface: rgba(255, 255, 255, 0.04);
  --bg-surface-hover: rgba(255, 255, 255, 0.06);
  --bg-surface-active: rgba(16, 185, 129, 0.08);
  --border-subtle: rgba(255, 255, 255, 0.05);
  --border-medium: rgba(255, 255, 255, 0.08);
  --text-primary: #c0caf5;
  --text-secondary: #a9b1d6;
  --text-muted: #565f89;
  --text-inverse: #13141c;
  --btn-run-bg: #10b981;
  --btn-run-hover: #059669;
  --btn-run-text: #ffffff;
  --btn-stop-bg: #f43f5e;
  --btn-stop-hover: #e11d48;
  --btn-stop-text: #ffffff;
  --btn-disabled-bg: rgba(255, 255, 255, 0.03);
  --btn-disabled-text: rgba(255, 255, 255, 0.15);
  --status-dot: #10b981;
  --status-text: #34d399;
  --accent-file: #7aa2f7;
  --accent-lang: #ff9e64;
  --accent-terminal: #7aa2f7;
  --accent-success: #9ece6a;
  --accent-error: #f7768e;
  --accent-info: #a9b1d6;
  --divider-color: rgba(16, 185, 129, 0.12);
  --console-grid: rgba(255, 255, 255, 0.015);
  --scrollbar-thumb: rgba(255, 255, 255, 0.06);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.12);
  --shadow-dropdown:
    0 20px 60px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05);
  --kbd-bg: rgba(255, 255, 255, 0.05);
  --kbd-border: rgba(255, 255, 255, 0.08);
  --kbd-text: rgba(255, 255, 255, 0.2);
  --logo-text: #c0caf5;
  --logo-accent-from: #10b981;
  --logo-accent-to: #7aa2f7;
}

/* ═══════════════════════════════════════════════════════
   AURORA LIGHT STUDIO — Clean SaaS Light Theme
   Off-white, airy, warm natural tones
   ═══════════════════════════════════════════════════════ */
[data-theme="light"] {
  --bg-root: #f0f2f8;
  --bg-navbar: #ffffff;
  --bg-navbar-border: rgba(0, 0, 0, 0.06);
  --bg-panel-header: #f7f8fc;
  --bg-editor: #ffffff;
  --bg-console: #fafbfe;
  --bg-surface: rgba(30, 64, 175, 0.04);
  --bg-surface-hover: rgba(30, 64, 175, 0.06);
  --bg-surface-active: rgba(30, 64, 175, 0.08);
  --border-subtle: rgba(30, 64, 175, 0.07);
  --border-medium: rgba(30, 64, 175, 0.12);
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-muted: #94a3b8;
  --text-inverse: #ffffff;
  --btn-run-bg: #16a34a;
  --btn-run-hover: #15803d;
  --btn-run-text: #ffffff;
  --btn-stop-bg: #dc2626;
  --btn-stop-hover: #b91c1c;
  --btn-stop-text: #ffffff;
  --btn-disabled-bg: rgba(0, 0, 0, 0.03);
  --btn-disabled-text: rgba(0, 0, 0, 0.18);
  --status-dot: #2563eb;
  --status-text: #3b82f6;
  --accent-file: #1e40af;
  --accent-lang: #9a5b2f;
  --accent-terminal: #4f46e5;
  --accent-success: #2e7d32;
  --accent-error: #dc2626;
  --accent-info: #475569;
  --divider-color: rgba(30, 64, 175, 0.08);
  --console-grid: rgba(30, 64, 175, 0.025);
  --scrollbar-thumb: rgba(0, 0, 0, 0.08);
  --scrollbar-thumb-hover: rgba(0, 0, 0, 0.15);
  --shadow-dropdown:
    0 20px 60px rgba(30, 64, 175, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.05);
  --kbd-bg: rgba(30, 64, 175, 0.05);
  --kbd-border: rgba(30, 64, 175, 0.1);
  --kbd-text: rgba(30, 64, 175, 0.3);
  --logo-text: #1e293b;
  --logo-accent-from: #16a34a;
  --logo-accent-to: #2563eb;
}

/* ═══════════════════════════════════════════
   BASE STYLES
   ═══════════════════════════════════════════ */

/* Fix select option colors for dark/light themes */
[data-theme="dark"] select option {
  background: #1a1b26;
  color: #c0caf5;
}

[data-theme="light"] select option {
  background: #ffffff;
  color: #1e293b;
}

@layer base {
  body {
    font-family:
      "Outfit",
      "Inter",
      -apple-system,
      BlinkMacSystemFont,
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin: 0;
    padding: 0;
  }
}

/* ═══════════════════════════════════════════
   SCROLLBAR
   ═══════════════════════════════════════════ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 100px;
  border: 2px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
  background-clip: content-box;
}
::-webkit-scrollbar-corner {
  background: transparent;
}

/* ═══════════════════════════════════════════
   MONACO EDITOR OVERRIDES
   ═══════════════════════════════════════════ */
.monaco-editor .overflow-guard {
  border-radius: 0;
}

/* ═══════════════════════════════════════════
   DIVIDER
   ═══════════════════════════════════════════ */
.theme-divider {
  background: var(--divider-color);
}

/* ═══════════════════════════════════════════
   CONSOLE BACKGROUND
   ═══════════════════════════════════════════ */
.console-grid-bg {
  background-color: var(--bg-console);
  background-image:
    linear-gradient(var(--console-grid) 1px, transparent 1px),
    linear-gradient(90deg, var(--console-grid) 1px, transparent 1px);
  background-size: 24px 24px;
}

/* ═══════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════ */
@keyframes statusPulse {
  0%,
  100% {
    box-shadow: 0 0 0 0 var(--status-dot);
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 0 5px transparent;
    opacity: 0.7;
  }
}
.animate-status-pulse {
  animation: statusPulse 2s ease-in-out infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
.animate-spin-slow {
  animation: spin 1s linear infinite;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.animate-fade-in {
  animation: fadeIn 0.25s ease-out forwards;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50%       { opacity: 0.5; transform: scale(1.4); }
}

/* ═══════════════════════════════════════════
   XTERM.JS OVERRIDES
   ═══════════════════════════════════════════ */
/* xterm must fill its wrapper entirely */
.xterm {
  padding: 0 !important;
  height: 100% !important;
}
.xterm-screen {
  height: 100% !important;
}
/* Thin themed scrollbar for the viewport */
.xterm-viewport::-webkit-scrollbar {
  width: 6px;
}
.xterm-viewport::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 100px;
}
.xterm-viewport::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* ═══════════════════════════════════════════
   LOGO GRADIENT
   ═══════════════════════════════════════════ */
.text-gradient {
  background: linear-gradient(
    135deg,
    var(--logo-accent-from),
    var(--logo-accent-to)
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ═══════════════════════════════════════════
   RESPONSIVE DESIGN
   ═══════════════════════════════════════════ */

/* Mobile devices (portrait phones ≤ 767px) */
@media (max-width: 767px) {
  .responsive-main {
    flex-direction: column !important;
  }

  .responsive-editor {
    flex: 1 1 50% !important;
    min-height: 50vh !important;
  }

  .responsive-console {
    flex: 1 1 50% !important;
    min-height: 50vh !important;
    border-top: 1px solid var(--border-subtle) !important;
  }

  /* When console is hidden on mobile, editor takes full height */
  .responsive-main:has(.responsive-editor:only-child) .responsive-editor {
    min-height: 100vh !important;
  }

  .responsive-divider {
    display: none !important;
  }

  .responsive-hide-mobile {
    display: none !important;
  }

  .responsive-navbar {
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
    height: 3.5rem !important;
  }

  .responsive-status-bar {
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
  }

  /* Better touch targets on mobile — only real action buttons, not tiny header controls */
  button:not(.toast-close-btn):not(.hdr-btn) {
    min-height: 44px;
  }

  .toast-close-btn,
  .hdr-btn {
    min-height: unset !important;
    height: auto !important;
  }

  /* Mobile-specific Monaco editor adjustments */
  .monaco-editor {
    font-size: 12px !important;
  }

  .monaco-editor .lines-content {
    padding-left: 2px !important;
  }

  /* Improve console text readability on mobile */
  .console-output {
    font-size: 12px !important;
    line-height: 1.4 !important;
  }

  /* Tab styling */
  button[role="tab"] {
    font-size: 13px;
    padding: 10px !important;
    min-height: 44px !important;
  }
}

/* Tablet devices — stacked layout (768px–1199px) */
@media (min-width: 768px) and (max-width: 1199px) {
  .responsive-main {
    flex-direction: column !important;
  }

  .responsive-editor {
    flex: 1 1 0 !important;
    min-height: 0 !important;
    width: 100% !important;
    overflow: hidden !important;
  }

  .responsive-console {
    flex: 0 0 40% !important;
    min-height: 0 !important;
    width: 100% !important;
    border-top: 1px solid var(--border-subtle) !important;
    overflow: hidden !important;
  }

  .responsive-divider {
    display: none !important;
  }
}
